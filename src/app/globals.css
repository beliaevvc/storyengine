@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --radius: 0.375rem;
    
    /* Color tokens for inline styles */
    --color-border: #373e47;
    --color-border-emphasis: #444c56;
    --color-accent: #539bf5;
    --color-success: #57ab5a;
    --color-warning: #c69026;
    --color-entity-character: #a371f7;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-canvas text-fg font-sans antialiased;
  }

  /* Custom scrollbar - WebKit */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-border-muted rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-border;
  }

  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: #30363d transparent;
  }
}

@layer components {
  /* Panel styles */
  .panel {
    @apply bg-surface border border-border rounded-md;
  }

  .panel-header {
    @apply px-3 py-2 border-b border-border flex items-center justify-between;
  }

  .panel-title {
    @apply text-sm font-semibold text-fg;
  }

  .panel-content {
    @apply p-2;
  }

  /* Entity type indicators */
  .entity-dot {
    @apply w-2 h-2 rounded-full flex-shrink-0;
  }

  .entity-dot-character {
    @apply bg-entity-character;
  }
  .entity-dot-location {
    @apply bg-entity-location;
  }
  .entity-dot-item {
    @apply bg-entity-item;
  }
  .entity-dot-event {
    @apply bg-entity-event;
  }
  .entity-dot-concept {
    @apply bg-entity-concept;
  }

  /* Tree view styles */
  .tree-item {
    @apply flex items-center gap-1 px-2 py-1 rounded-sm cursor-pointer
           text-sm text-fg hover:bg-overlay transition-colors;
  }

  .tree-item-selected {
    @apply bg-accent-subtle border-l-2 border-accent text-accent;
  }

  /* Focus ring */
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-canvas;
  }
}

@layer components {
  /* Tiptap Editor styles */
  .ProseMirror {
    @apply outline-none;
  }

  .ProseMirror p.is-editor-empty:first-child::before {
    @apply text-fg-muted pointer-events-none float-left h-0;
    content: attr(data-placeholder);
  }

  /* Entity mark styles in editor */
  .entity-mark {
    @apply cursor-pointer;
  }

  .entity-character {
    @apply text-entity-character;
  }

  .entity-location {
    @apply text-entity-location;
  }

  .entity-item {
    @apply text-entity-item;
  }

  .entity-event {
    @apply text-entity-event;
  }

  .entity-concept {
    @apply text-entity-concept;
  }

  /* Entity mention styles */
  .entity-mention {
    @apply inline-flex items-center gap-1 px-1.5 py-0.5 rounded border cursor-pointer;
  }

  .entity-mention[data-type="CHARACTER"] {
    @apply bg-blue-500/20 text-blue-400 border-blue-500/30;
  }

  .entity-mention[data-type="LOCATION"] {
    @apply bg-green-500/20 text-green-400 border-green-500/30;
  }

  .entity-mention[data-type="ITEM"] {
    @apply bg-yellow-500/20 text-yellow-400 border-yellow-500/30;
  }

  .entity-mention[data-type="EVENT"] {
    @apply bg-purple-500/20 text-purple-400 border-purple-500/30;
  }

  .entity-mention[data-type="FACTION"] {
    @apply bg-orange-500/20 text-orange-400 border-orange-500/30;
  }

  .entity-mention[data-type="WORLDBUILDING"] {
    @apply bg-cyan-500/20 text-cyan-400 border-cyan-500/30;
  }

  .entity-mention[data-type="NOTE"] {
    @apply bg-gray-500/20 text-gray-400 border-gray-500/30;
  }

  /* Inline comment styles */
  .inline-comment {
    @apply bg-yellow-500/20 border-b-2 border-yellow-500/50 cursor-pointer;
  }

  .inline-comment:hover {
    @apply bg-yellow-500/30;
  }

  /* Drag & Drop styles */
  .ProseMirror .is-dragging {
    @apply opacity-50;
  }

  .ProseMirror [data-drag-handle] {
    cursor: grab;
  }

  .ProseMirror [data-drag-handle]:active {
    cursor: grabbing;
  }

  /* Drop indicator */
  .ProseMirror-gapcursor {
    @apply relative;
  }

  .ProseMirror-gapcursor:after {
    @apply absolute bg-accent;
    content: "";
    width: 100%;
    height: 2px;
  }

  /* Draggable block indicator */
  .ProseMirror .semantic-block.ProseMirror-selectednode {
    @apply ring-2 ring-accent ring-offset-2 ring-offset-canvas;
  }

  /* Drop cursor for dragging */
  .ProseMirror-dropcursor {
    @apply bg-accent;
    width: 100% !important;
    height: 2px !important;
  }

}

@layer utilities {
  /* Text truncation */
  .truncate-2,
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3,
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
